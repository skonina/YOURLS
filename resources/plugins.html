




<!DOCTYPE html>
<html>
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#">
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Plugins · YOURLS/YOURLS Wiki · GitHub</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub" />
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub" />
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-144.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144.png" />
    <meta property="fb:app_id" content="1401488693436528"/>

      <meta content="@github" name="twitter:site" /><meta content="summary" name="twitter:card" /><meta content="YOURLS/YOURLS" name="twitter:title" /><meta content="YOURLS - Your Own URL Shortener." name="twitter:description" /><meta content="https://2.gravatar.com/avatar/9fa0674ea2d247dd9523f7a05a46476b?d=https%3A%2F%2Fidenticons.github.com%2Fb6546b2ba0fa4aa1fc0ea8e073562560.png&amp;r=x&amp;s=400" name="twitter:image:src" />
<meta content="GitHub" property="og:site_name" /><meta content="object" property="og:type" /><meta content="https://2.gravatar.com/avatar/9fa0674ea2d247dd9523f7a05a46476b?d=https%3A%2F%2Fidenticons.github.com%2Fb6546b2ba0fa4aa1fc0ea8e073562560.png&amp;r=x&amp;s=400" property="og:image" /><meta content="YOURLS/YOURLS" property="og:title" /><meta content="https://github.com/YOURLS/YOURLS" property="og:url" /><meta content="YOURLS - Your Own URL Shortener." property="og:description" />

    <meta name="hostname" content="github-fe138-cp1-prd.iad.github.net">
    <meta name="ruby" content="ruby 2.1.0p0-github-tcmalloc (87c9373a41) [x86_64-linux]">
    <link rel="assets" href="https://github.global.ssl.fastly.net/">
    <link rel="conduit-xhr" href="https://ghconduit.com:25035/">
    <link rel="xhr-socket" href="/_sockets" />


    <meta name="msapplication-TileImage" content="/windows-tile.png" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="selected-link" value="repo_wiki" data-pjax-transient />
    <meta content="collector.githubapp.com" name="octolytics-host" /><meta content="collector-cdn.github.com" name="octolytics-script-host" /><meta content="github" name="octolytics-app-id" /><meta content="53061067:2552:119180:5320E096" name="octolytics-dimension-request_id" />
    

    
    
    <link rel="icon" type="image/x-icon" href="https://github.global.ssl.fastly.net/favicon.ico" />

    <meta content="authenticity_token" name="csrf-param" />
<meta content="wVUwObkcw+1pSW1lRDYOKTkHGck3R/huku+5ahZ8o34=" name="csrf-token" />

    <link href="https://github.global.ssl.fastly.net/assets/github-adcf123587b068f65ee2420a9a7988231694ba13.css" media="all" rel="stylesheet" type="text/css" />
    <link href="https://github.global.ssl.fastly.net/assets/github2-833ee98e576ecb02295720c31a3e06ed45cd542c.css" media="all" rel="stylesheet" type="text/css" />
    


      <script crossorigin="anonymous" src="https://github.global.ssl.fastly.net/assets/frameworks-2e49d5071736dcbf0f2b6f4ac25acf6b6e0f78e6.js" type="text/javascript"></script>
      <script async="async" crossorigin="anonymous" src="https://github.global.ssl.fastly.net/assets/github-bd6b05e5ad66336f8dbcca0af4e1fc320bbd64a4.js" type="text/javascript"></script>
      
      <meta http-equiv="x-pjax-version" content="bea2e5e16428a7043d3c48e05924304f">

        <script crossorigin="anonymous" src="https://github.global.ssl.fastly.net/assets/wiki-2def0b6c118bb21ce58bd2ca94311357a266a57b.js" type="text/javascript"></script>

  <meta name="description" content="YOURLS - Your Own URL Shortener." />

  <meta content="2106111" name="octolytics-dimension-user_id" /><meta content="YOURLS" name="octolytics-dimension-user_login" /><meta content="5508585" name="octolytics-dimension-repository_id" /><meta content="YOURLS/YOURLS" name="octolytics-dimension-repository_nwo" /><meta content="true" name="octolytics-dimension-repository_public" /><meta content="false" name="octolytics-dimension-repository_is_fork" /><meta content="5508585" name="octolytics-dimension-repository_network_root_id" /><meta content="YOURLS/YOURLS" name="octolytics-dimension-repository_network_root_nwo" />
  <link href="https://github.com/YOURLS/YOURLS/commits/master.atom" rel="alternate" title="Recent Commits to YOURLS:master" type="application/atom+xml" />

  </head>


  <body class="logged_out  env-production linux vis-public">
    <a href="#start-of-content" class="accessibility-aid js-skip-to-content">Skip to content</a>
    <div class="wrapper">
      
      
      
      


      
      <div class="header header-logged-out">
  <div class="container clearfix">

    <a class="header-logo-wordmark" href="https://github.com/">
      <span class="mega-octicon octicon-logo-github"></span>
    </a>

    <div class="header-actions">
        <a class="button primary" href="/join">Sign up</a>
      <a class="button signin" href="/login?return_to=%2FYOURLS%2FYOURLS%2Fwiki%2FPlugins">Sign in</a>
    </div>

    <div class="command-bar js-command-bar  in-repository">

      <ul class="top-nav">
          <li class="explore"><a href="/explore">Explore</a></li>
        <li class="features"><a href="/features">Features</a></li>
          <li class="enterprise"><a href="https://enterprise.github.com/">Enterprise</a></li>
          <li class="blog"><a href="/blog">Blog</a></li>
      </ul>
        <form accept-charset="UTF-8" action="/search" class="command-bar-form" id="top_search_form" method="get">

<input type="text" data-hotkey="/ s" name="q" id="js-command-bar-field" placeholder="Search or type a command" tabindex="1" autocapitalize="off"
    
    
      data-repo="YOURLS/YOURLS"
      data-branch="master"
      data-sha="3694607c9c3ff2b9a1287f7a0bc2a9b0949076ed"
  >

    <input type="hidden" name="nwo" value="YOURLS/YOURLS" />

    <div class="select-menu js-menu-container js-select-menu search-context-select-menu">
      <span class="minibutton select-menu-button js-menu-target" role="button" aria-haspopup="true">
        <span class="js-select-button">This repository</span>
      </span>

      <div class="select-menu-modal-holder js-menu-content js-navigation-container" aria-hidden="true">
        <div class="select-menu-modal">

          <div class="select-menu-item js-navigation-item js-this-repository-navigation-item selected">
            <span class="select-menu-item-icon octicon octicon-check"></span>
            <input type="radio" class="js-search-this-repository" name="search_target" value="repository" checked="checked" />
            <div class="select-menu-item-text js-select-button-text">This repository</div>
          </div> <!-- /.select-menu-item -->

          <div class="select-menu-item js-navigation-item js-all-repositories-navigation-item">
            <span class="select-menu-item-icon octicon octicon-check"></span>
            <input type="radio" name="search_target" value="global" />
            <div class="select-menu-item-text js-select-button-text">All repositories</div>
          </div> <!-- /.select-menu-item -->

        </div>
      </div>
    </div>

  <span class="help tooltipped tooltipped-s" aria-label="Show command bar help">
    <span class="octicon octicon-question"></span>
  </span>


  <input type="hidden" name="ref" value="cmdform">

</form>
    </div>

  </div>
</div>



      <div id="start-of-content" class="accessibility-aid"></div>
          <div class="site" itemscope itemtype="http://schema.org/WebPage">
    
    <div class="pagehead repohead instapaper_ignore readability-menu">
      <div class="container">
        

<ul class="pagehead-actions">


  <li>
    <a href="/login?return_to=%2FYOURLS%2FYOURLS"
    class="minibutton with-count js-toggler-target star-button tooltipped tooltipped-n"
    aria-label="You must be signed in to star a repository" rel="nofollow">
    <span class="octicon octicon-star"></span>Star
  </a>

    <a class="social-count js-social-count" href="/YOURLS/YOURLS/stargazers">
      823
    </a>

  </li>

    <li>
      <a href="/login?return_to=%2FYOURLS%2FYOURLS"
        class="minibutton with-count js-toggler-target fork-button tooltipped tooltipped-n"
        aria-label="You must be signed in to fork a repository" rel="nofollow">
        <span class="octicon octicon-git-branch"></span>Fork
      </a>
      <a href="/YOURLS/YOURLS/network" class="social-count">
        214
      </a>
    </li>
</ul>

        <h1 itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public">
          <span class="repo-label"><span>public</span></span>
          <span class="mega-octicon octicon-repo"></span>
          <span class="author">
            <a href="/YOURLS" class="url fn" itemprop="url" rel="author"><span itemprop="title">YOURLS</span></a>
          </span>
          <span class="repohead-name-divider">/</span>
          <strong><a href="/YOURLS/YOURLS" class="js-current-repository js-repo-home-link">YOURLS</a></strong>

          <span class="page-context-loader">
            <img alt="Octocat-spinner-32" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
          </span>

        </h1>
      </div><!-- /.container -->
    </div><!-- /.repohead -->

    <div class="container">
      <div class="repository-with-sidebar repo-container new-discussion-timeline js-new-discussion-timeline  ">
        <div class="repository-sidebar clearfix">
            

<div class="sunken-menu vertical-right repo-nav js-repo-nav js-repository-container-pjax js-octicon-loaders">
  <div class="sunken-menu-contents">
    <ul class="sunken-menu-group">
      <li class="tooltipped tooltipped-w" aria-label="Code">
        <a href="/YOURLS/YOURLS" aria-label="Code" class="js-selected-navigation-item sunken-menu-item" data-gotokey="c" data-pjax="true" data-selected-links="repo_source repo_downloads repo_commits repo_tags repo_branches /YOURLS/YOURLS">
          <span class="octicon octicon-code"></span> <span class="full-word">Code</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

        <li class="tooltipped tooltipped-w" aria-label="Issues">
          <a href="/YOURLS/YOURLS/issues" aria-label="Issues" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-gotokey="i" data-selected-links="repo_issues /YOURLS/YOURLS/issues">
            <span class="octicon octicon-issue-opened"></span> <span class="full-word">Issues</span>
            <span class='counter'>45</span>
            <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>        </li>

      <li class="tooltipped tooltipped-w" aria-label="Pull Requests">
        <a href="/YOURLS/YOURLS/pulls" aria-label="Pull Requests" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-gotokey="p" data-selected-links="repo_pulls /YOURLS/YOURLS/pulls">
            <span class="octicon octicon-git-pull-request"></span> <span class="full-word">Pull Requests</span>
            <span class='counter'>2</span>
            <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>


        <li class="tooltipped tooltipped-w" aria-label="Wiki">
          <a href="/YOURLS/YOURLS/wiki" aria-label="Wiki" class="selected js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="repo_wiki /YOURLS/YOURLS/wiki">
            <span class="octicon octicon-book"></span> <span class="full-word">Wiki</span>
            <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>        </li>
    </ul>
    <div class="sunken-menu-separator"></div>
    <ul class="sunken-menu-group">

      <li class="tooltipped tooltipped-w" aria-label="Pulse">
        <a href="/YOURLS/YOURLS/pulse" aria-label="Pulse" class="js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="pulse /YOURLS/YOURLS/pulse">
          <span class="octicon octicon-pulse"></span> <span class="full-word">Pulse</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

      <li class="tooltipped tooltipped-w" aria-label="Graphs">
        <a href="/YOURLS/YOURLS/graphs" aria-label="Graphs" class="js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="repo_graphs repo_contributors /YOURLS/YOURLS/graphs">
          <span class="octicon octicon-graph"></span> <span class="full-word">Graphs</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

      <li class="tooltipped tooltipped-w" aria-label="Network">
        <a href="/YOURLS/YOURLS/network" aria-label="Network" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-selected-links="repo_network /YOURLS/YOURLS/network">
          <span class="octicon octicon-git-branch"></span> <span class="full-word">Network</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>
    </ul>


  </div>
</div>

              <div class="only-with-full-nav">
                

  

<div class="clone-url open"
  data-protocol-type="http"
  data-url="/users/set_protocol?protocol_selector=http&amp;protocol_type=clone">
  <h3><strong>HTTPS</strong> clone URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone js-url-field"
           value="https://github.com/YOURLS/YOURLS.git" readonly="readonly">

    <span aria-label="copy to clipboard" class="js-zeroclipboard url-box-clippy minibutton zeroclipboard-button" data-clipboard-text="https://github.com/YOURLS/YOURLS.git" data-copied-hint="copied!"><span class="octicon octicon-clippy"></span></span>
  </div>
</div>

  

<div class="clone-url "
  data-protocol-type="subversion"
  data-url="/users/set_protocol?protocol_selector=subversion&amp;protocol_type=clone">
  <h3><strong>Subversion</strong> checkout URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone js-url-field"
           value="https://github.com/YOURLS/YOURLS" readonly="readonly">

    <span aria-label="copy to clipboard" class="js-zeroclipboard url-box-clippy minibutton zeroclipboard-button" data-clipboard-text="https://github.com/YOURLS/YOURLS" data-copied-hint="copied!"><span class="octicon octicon-clippy"></span></span>
  </div>
</div>


<p class="clone-options">You can clone with
      <a href="#" class="js-clone-selector" data-protocol="http">HTTPS</a>
      or <a href="#" class="js-clone-selector" data-protocol="subversion">Subversion</a>.
  <span class="help tooltipped tooltipped-n" aria-label="Get help on which URL is right for you.">
    <a href="https://help.github.com/articles/which-remote-url-should-i-use">
    <span class="octicon octicon-question"></span>
    </a>
  </span>
</p>



                <a href="/YOURLS/YOURLS/archive/master.zip"
                   class="minibutton sidebar-button"
                   aria-label="Download YOURLS/YOURLS as a zip file"
                   title="Download YOURLS/YOURLS as a zip file"
                   rel="nofollow">
                  <span class="octicon octicon-cloud-download"></span>
                  Download ZIP
                </a>
              </div>
        </div><!-- /.repository-sidebar -->

        <div id="js-repo-pjax-container" class="repository-content context-loader-container" data-pjax-container>
          

<div class="tabnav">
  <ul class="tabnav-tabs">
    <li><a href="/YOURLS/YOURLS/wiki" class="js-selected-navigation-item tabnav-tab" data-selected-links=" /YOURLS/YOURLS/wiki">Home</a></li>
    <li><a href="/YOURLS/YOURLS/wiki/_pages" class="js-selected-navigation-item tabnav-tab" data-selected-links=" /YOURLS/YOURLS/wiki/_pages">Pages</a></li>
    <li><a href="/YOURLS/YOURLS/wiki/_history" class="js-selected-navigation-item tabnav-tab" data-selected-links=" /YOURLS/YOURLS/wiki/_history">History</a></li>
  </ul>
</div>



<div id="wiki-wrapper" class="page">
<div id="head">
  <ul class="wiki-actions readability-extra">
    <li class="gollum-minibutton"><a href="/YOURLS/YOURLS/wiki/Plugins/_history"
       class="minibutton bigger action-page-history">
       Page History
     </a></li>
    <li class="gollum-minibutton"><span aria-label="Click to copy url to clipboard" class="js-zeroclipboard minibutton" data-clipboard-text="https://github.com/YOURLS/YOURLS.wiki.git" data-copied-hint="copied!">Clone URL</span></li>
  </ul>
  <h1 class="instapaper_title">Plugins</h1>
</div>
<div id="wiki-content">
  <div class="wrap has-rightbar">
  <div id="wiki-rightbar" class="gollum-markdown-content readability-sidebar">
    <p><img src="/YOURLS/YOURLS/wiki/images/logo.png"></p>

<ul>
<li><a href="http://yourls.org/">Official README</a></li>
<li><a class="internal present" href="/YOURLS/YOURLS/wiki/Home#wiki-documentation">Documentation index</a></li>
<li><a class="internal present" href="/YOURLS/YOURLS/wiki/YOURLS-in-your-language">Available languages</a></li>
<li><a href="https://github.com/YOURLS/YOURLS/releases">Latest official release</a></li>
<li><a href="https://github.com/YOURLS/YOURLS/archive/master.zip">Current dev build</a></li>
<li><a class="internal present" href="/YOURLS/YOURLS/wiki/Bug-Report">Bug report</a></li>
<li><a href="http://blog.yourls.org/">Important announcements</a></li>
</ul>
  </div>
  <div id="wiki-body" class="gollum-markdown-content instapaper_body">
    <div class="markdown-body">
      <p>How to make Plugins for YOURLS</p>

<h2>
<a name="wiki-plugins" class="anchor" href="#wiki-plugins"><span class="octicon octicon-link"></span></a>Plugins</h2>

<p>YOURLS features a plugin architecture and API. Plugins are additional PHP scripts that extend the functionalities or features of YOURLS. The core of YOURLS is designed to be as light as possible and avoid bloat (implementing functions not everybody needs) and to allow for easy customization.</p>

<p>Using the plugin architecture, you can add new features to YOURLS without having to modify core files. This way, your changes won't be lost when you upgrade your YOURLS installation. Because, <a class="internal present" href="/YOURLS/YOURLS/wiki/Dont-Hack-Core">Dont Hack Core</a>.</p>

<h2>
<a name="wiki-structure-of-a-plugin-file" class="anchor" href="#wiki-structure-of-a-plugin-file"><span class="octicon octicon-link"></span></a>Structure of a Plugin File</h2>

<p>A plugin file needs to be named <code>plugin.php</code> and to be located in its own subdirectory of <code>[YOURLS_ROOT]/user/plugins</code>, <em>eg</em>:</p>

<pre><code>YOURLS_ROOT/user/plugins/my_sample_plugin/plugin.php
</code></pre>

<p>The plugin file <code>plugin.php</code> needs to begin with a header like the following one:</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="cm">/*</span>
<span class="cm">Plugin Name: My Sample Plugin</span>
<span class="cm">Plugin URI: http://mysite.com/yourls-sample-plugin/</span>
<span class="cm">Description: This plugin does something and something else</span>
<span class="cm">Version: 1.0</span>
<span class="cm">Author: Ozh</span>
<span class="cm">Author URI: http://ozh.org/</span>
<span class="cm">*/</span>
</pre></div>

<h2>
<a name="wiki-plugin-api" class="anchor" href="#wiki-plugin-api"><span class="octicon octicon-link"></span></a>Plugin API</h2>

<p>YOURLS core uses two kinds of 'hooks', <em>filters</em> and <em>actions</em>, allowing your plugin to 'hook into' what YOURLS does.</p>

<ul>
<li>
<em>actions</em> are the hooks YOURLS triggers at specific points or during specific action. It's a way of telling "hey, this particular event just occurred", so your plugin can execute a defined function at this point.</li>
<li>
<em>filters</em> are the hooks YOURLS triggers to allow modification of a variable before returning it, sending it into the database or displaying it.</li>
</ul><h3>
<a name="wiki-actions" class="anchor" href="#wiki-actions"><span class="octicon octicon-link"></span></a>Actions</h3>

<p><em>Actions</em> are triggered by specific actions: inserting a link in the database, sending headers to the browser, redirecting to a long URL...</p>

<p>A typical action in YOURLS is a function call like the following:</p>

<div class="highlight highlight-php"><pre><span class="nx">yourls_do_action</span><span class="p">(</span> <span class="s1">'some_event'</span> <span class="p">);</span>
</pre></div>

<p>The function <code>yourls_do_action()</code> can also accept parameters to give more context to a particular event. For instance, the following action occurs on redirection to a long URL:</p>

<div class="highlight highlight-php"><pre><span class="nx">yourls_do_action</span><span class="p">(</span> <span class="s1">'redirect_shorturl'</span><span class="p">,</span> <span class="nv">$url</span> <span class="p">);</span>
</pre></div>

<h4>
<a name="wiki-create-an-action-function" class="anchor" href="#wiki-create-an-action-function"><span class="octicon octicon-link"></span></a>Create an Action function</h4>

<p>The steps to create an action function are:</p>

<ol>
<li>define a custom PHP function that should execute when a particular event occurs;</li>
<li>hook your function to the particular event, using YOURLS functions <code>yourls_add_action()</code>;</li>
<li>put your custom function and its hook into a plugin file</li>
</ol><h4>
<a name="wiki-example-of-a-simple-action-function" class="anchor" href="#wiki-example-of-a-simple-action-function"><span class="octicon octicon-link"></span></a>Example of a simple Action function</h4>

<p>When an admin page is sent to the browser, after the YOURLS logo has been printed an event occurs</p>

<div class="highlight highlight-php"><pre><span class="nx">yourls_do_action</span><span class="p">(</span> <span class="s1">'html_logo'</span> <span class="p">);</span>
</pre></div>

<p>Let's add custom text right after the logo:</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// our custom function that adds text</span>
<span class="k">function</span> <span class="nf">my_custom_text</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"&lt;p&gt;This is a custom text&lt;/p&gt;"</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Now hook our custom function into the 'html_logo' event</span>
<span class="nx">yourls_add_action</span><span class="p">(</span> <span class="s1">'html_logo'</span><span class="p">,</span> <span class="s1">'my_custom_text'</span><span class="p">);</span>
</pre></div>

<p>Simple heh?</p>

<h4>
<a name="wiki-example-of-an-advanced-action-function" class="anchor" href="#wiki-example-of-an-advanced-action-function"><span class="octicon octicon-link"></span></a>Example of an advanced Action function</h4>

<p>Before the browser is redirected to another location (like when loading a short URL that points to a long URL), the following event is triggered:</p>

<div class="highlight highlight-php"><pre><span class="nx">yourls_do_action</span><span class="p">(</span> <span class="s1">'pre_redirect'</span><span class="p">,</span> <span class="nv">$location</span><span class="p">,</span> <span class="nv">$code</span> <span class="p">);</span>
</pre></div>

<p>with <code>$location</code> being the location to be redirected to, and <code>$code</code> being the status header to be sent ('301 Moved Permanently' most of the time)</p>

<p>Now if you hook a custom function into the event 'pre_redirect', it will be passed <code>array($location, $code)</code> as an argument.</p>

<p>Let's interrupt the redirection with a message telling the user they are about to be sent to another URL:</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// Hook our custom function into the 'pre_redirect' event</span>
<span class="nx">yourls_add_action</span><span class="p">(</span> <span class="s1">'pre_redirect'</span><span class="p">,</span> <span class="s1">'warning_redirection'</span> <span class="p">);</span>

<span class="c1">// Our custom function that will be triggered when the event occurs</span>
<span class="k">function</span> <span class="nf">warning_redirection</span><span class="p">(</span> <span class="nv">$args</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$args</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="nv">$code</span> <span class="o">=</span> <span class="nv">$args</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="k">echo</span> <span class="s2">"&lt;p&gt;This is a redirection page to: </span><span class="si">$url</span><span class="s2">&lt;/p&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;p&gt;Click &lt;a href='</span><span class="si">$url</span><span class="s2">'&gt;here&lt;/a&gt; to proceed&lt;/p&gt;"</span><span class="p">;</span>

    <span class="c1">// Now die so the normal flow of event is interrupted</span>
    <span class="k">die</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>

<h3>
<a name="wiki-filters" class="anchor" href="#wiki-filters"><span class="octicon octicon-link"></span></a>Filters</h3>

<p><em>Filters</em> are functions that process data, typically before being handled or returned by an internal function of YOURLS.</p>

<p>A typical filter in YOURLS is a function call like the following:</p>

<div class="highlight highlight-php"><pre><span class="nv">$value</span> <span class="o">=</span> <span class="nx">yourls_apply_filter</span><span class="p">(</span> <span class="s1">'some_filter'</span><span class="p">,</span> <span class="nv">$value</span> <span class="p">);</span>
</pre></div>

<h4>
<a name="wiki-create-a-filter-function" class="anchor" href="#wiki-create-a-filter-function"><span class="octicon octicon-link"></span></a>Create a Filter function</h4>

<p>The steps to create a filter function are:</p>

<ol>
<li>define a custom PHP function that accepts arguments, process them and <em>return</em> them;</li>
<li>hook your function to the particular filter, using YOURLS function <code>yourls_add_filter()</code>;</li>
<li>put your custom function and its hook into a plugin file.</li>
</ol><h4>
<a name="wiki-example-of-a-filter-function" class="anchor" href="#wiki-example-of-a-filter-function"><span class="octicon octicon-link"></span></a>Example of a filter function</h4>

<p>When a short URL is created with no custom keyword provided, a random (actually, sequential) keyword is generated. Then this keyword goes through the following filter:</p>

<div class="highlight highlight-php"><pre><span class="nv">$keyword</span> <span class="o">=</span> <span class="nx">yourls_apply_filter</span><span class="p">(</span> <span class="s1">'random_keyword'</span><span class="p">,</span> <span class="nv">$keyword</span> <span class="p">);</span>
</pre></div>

<p>If a custom function hooks into the 'random_keyword' filter, it will be sent <code>$keyword</code> as an argument.</p>

<p>Let's append 'iloveyourls' to every sequential keyword, so that the generated shorturl become <code>http://site.com/abciloveyourls</code> instead of <code>http://site.com/abc</code></p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// hook our custom function into the 'random_keyword' filter</span>
<span class="nx">yourls_add_filter</span><span class="p">(</span> <span class="s1">'random_keyword'</span><span class="p">,</span> <span class="s1">'my_silly_function'</span> <span class="p">);</span>

<span class="c1">// Our silly custom function</span>
<span class="k">function</span> <span class="nf">my_silly_function</span><span class="p">(</span> <span class="nv">$original_keyword</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">$silly_keyword</span> <span class="o">=</span> <span class="nv">$original_keyword</span> <span class="o">.</span> <span class="s2">"iloveyourls"</span><span class="p">;</span>

    <span class="c1">// a filter function MUST return something once its arguments are processed</span>
    <span class="k">return</span> <span class="nv">$silly_keyword</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<h3>
<a name="wiki-plugin-admin-pages" class="anchor" href="#wiki-plugin-admin-pages"><span class="octicon octicon-link"></span></a>Plugin admin pages</h3>

<p>If you want to make your plugin settings customizable via the web interface, you can register a "plugin page" that will appear as a sub-item under the Plugins menu.</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// Register your plugin admin page</span>
<span class="nx">yourls_add_action</span><span class="p">(</span> <span class="s1">'plugins_loaded'</span><span class="p">,</span> <span class="s1">'myplugin_init'</span> <span class="p">);</span>
<span class="k">function</span> <span class="nf">myplugin_init</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">yourls_register_plugin_page</span><span class="p">(</span> <span class="s1">'myplugin'</span><span class="p">,</span> <span class="s1">'My Plugin'</span><span class="p">,</span> <span class="s1">'myplugin_display_page'</span> <span class="p">);</span>
<span class="p">}</span>

<span class="c1">// The function that will draw the admin page</span>
<span class="k">function</span> <span class="nf">myplugin_display_page</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Hello, World!"</span>
<span class="p">}</span>
</pre></div>

<h2>
<a name="wiki-wrapping-it-up-your-first-plugin" class="anchor" href="#wiki-wrapping-it-up-your-first-plugin"><span class="octicon octicon-link"></span></a>Wrapping it up: your first plugin</h2>

<p>We saw how to interrupt the redirection with a warning message, and how to make all random short URLs end with 'iloveyourls': let's package these example into an actual (yet totally pointless) plugin.</p>

<p>First we need to create the plugin directory and file:</p>

<ol>
<li>in <code>user/plugins/</code> create a new directory, named for instance <code>my_first_plugin</code>
</li>
<li>create a new empty file named <code>plugin.php</code>
</li>
</ol><p><strong>ProTip</strong>: On Github, fork this skeleton repository to get yours in seconds: <a href="https://github.com/YOURLS/plugin-sample">https://github.com/YOURLS/plugin-sample</a></p>

<p>In this empty <code>plugin.php</code> paste the following code:</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="cm">/*</span>
<span class="cm">Plugin Name: My First Plugin</span>
<span class="cm">Plugin URI: http://code.google.com/p/yourls/wiki/Plugins</span>
<span class="cm">Description: Sample (pointless) plugin that interrupts short URLs redirection and creates absurdly long short URLs</span>
<span class="cm">Version: 1.0</span>
<span class="cm">Author: Ozh</span>
<span class="cm">Author URI: http://ozh.org/</span>
<span class="cm">*/</span>

<span class="c1">// Hook our custom function into the 'pre_redirect' event</span>
<span class="nx">yourls_add_action</span><span class="p">(</span> <span class="s1">'pre_redirect'</span><span class="p">,</span> <span class="s1">'warning_redirection'</span> <span class="p">);</span>

<span class="c1">// Our custom function that will be triggered when the event occurs</span>
<span class="k">function</span> <span class="nf">warning_redirection</span><span class="p">(</span> <span class="nv">$args</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">$url</span>  <span class="o">=</span> <span class="nv">$args</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="nv">$code</span> <span class="o">=</span> <span class="nv">$args</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="c1">// Print the message</span>
    <span class="k">echo</span> <span class="s2">"&lt;p&gt;This is a redirection page to: </span><span class="si">$url</span><span class="s2">&lt;/p&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;p&gt;Click &lt;a href='</span><span class="si">$url</span><span class="s2">'&gt;here&lt;/a&gt; to proceed&lt;/p&gt;"</span><span class="p">;</span>

    <span class="c1">// Now die so the normal flow of event is interrupted</span>
    <span class="k">die</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// hook our custom function into the 'random_keyword' filter</span>
<span class="nx">yourls_add_filter</span><span class="p">(</span> <span class="s1">'random_keyword'</span><span class="p">,</span> <span class="s1">'my_silly_function'</span> <span class="p">);</span>

<span class="c1">// Our silly custom function</span>
<span class="k">function</span> <span class="nf">my_silly_function</span><span class="p">(</span> <span class="nv">$original_keyword</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">$silly_keyword</span> <span class="o">=</span> <span class="nv">$original_keyword</span> <span class="o">.</span> <span class="s2">"iloveyourls"</span><span class="p">;</span>

    <span class="c1">// a filter function MUST return something once its arguments are processed</span>
    <span class="k">return</span> <span class="nv">$silly_keyword</span><span class="p">;</span>
<span class="p">}</span>


<span class="c1">// And that's it!</span>
</pre></div>

<p>Now put this <code>plugin.php</code> into <code>user/plugins/my_first_plugin/</code> and go to the admin page of your YOURLS setup: a new Plugin menu appears and points to the plugin administration page.</p>

<p>Congratulation, you've just extended the functionalities of YOURLS!</p>

<h2>
<a name="wiki-list-of-hooks" class="anchor" href="#wiki-list-of-hooks"><span class="octicon octicon-link"></span></a>List of hooks</h2>

<p>A full list of hooks (actions and filters) exists here: <a href="http://yourls.org/hooklist.php">http://yourls.org/hooklist.php</a><br>
It is generated every night against the current development version of YOURLS</p>

<p>If you code a plugin, you should run that dev version on a test install.</p>

<h2>
<a name="wiki-coding-guidelines-or-die" class="anchor" href="#wiki-coding-guidelines-or-die"><span class="octicon octicon-link"></span></a>Coding Guidelines Or Die</h2>

<ul>
<li>Prefix everything. Function names, global variables, classes, option names, everything should be uniquely prefixed to avoid conflict with another plugin or, worse, YOURLS' core. The best naming scheme to date is <code>nick_project_meaningful_stuff</code> (eg <code>ozh_pingfm_add_more_cheese</code>, <code>joe_captcha_validate_input</code>, etc..)</li>
<li>Corollary: you <strong>must not</strong> use <code>yourls_</code> as a prefix. This is for core functions only.</li>
<li>Code your plugin against the dev version. It'll be easier for you to follow code development and request inclusions of any missing hook</li>
<li>Code with <code>define( 'YOURLS_DEBUG', true );</code> in your <code>config.php</code> to catch PHP notices and coding mistakes soon</li>
<li>Write clean, whitespaced, commented code.</li>
</ul><p>Read <a class="internal present" href="/YOURLS/YOURLS/wiki/Coding-Standards">Coding Standards</a> (or, you know, die)</p>
    </div>
  </div>
  <div id="wiki-footer">
    <div id="gollum-footer-content" class="gollum-markdown-content">
      <p><img src="https://raw.github.com/wiki/YOURLS/YOURLS/images/favicon.gif" alt=""><a href="https://github.com/YOURLS/YOURLS/wiki"> Documentation</a>
<img src="https://raw.github.com/wiki/YOURLS/YOURLS/images/favicon.gif" alt=""><a href="http://yourls.org"> yourls.org</a>
<img src="https://raw.github.com/wiki/YOURLS/YOURLS/images/favicon.gif" alt=""><a href="http://blog.yourls.org"> YOURLS Blog</a>
<img src="https://raw.github.com/wiki/YOURLS/YOURLS/images/favicon.gif" alt=""><a href="http://ozh.org"> ozh.org</a></p>
    </div>
  </div>
  </div>

</div>
<div id="gollum-footer">
  <p id="last-edit">
    Last edited by ྅༻ Ǭɀħ ༄༆ཉ, <time class="js-relative-date" data-title-format="YYYY-MM-DD HH:mm:ss" datetime="2014-02-27T07:53:38-08:00" title="2014-02-27 16:53:38">February 27, 2014</time>
  </p>
</div>
</div>


        </div>

      </div><!-- /.repo-container -->
      <div class="modal-backdrop"></div>
    </div><!-- /.container -->
  </div><!-- /.site -->


    </div><!-- /.wrapper -->

      <div class="container">
  <div class="site-footer">
    <ul class="site-footer-links right">
      <li><a href="https://status.github.com/">Status</a></li>
      <li><a href="http://developer.github.com">API</a></li>
      <li><a href="http://training.github.com">Training</a></li>
      <li><a href="http://shop.github.com">Shop</a></li>
      <li><a href="/blog">Blog</a></li>
      <li><a href="/about">About</a></li>

    </ul>

    <a href="/">
      <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
    </a>

    <ul class="site-footer-links">
      <li>&copy; 2014 <span title="0.07231s from github-fe138-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li><a href="/site/terms">Terms</a></li>
        <li><a href="/site/privacy">Privacy</a></li>
        <li><a href="/security">Security</a></li>
        <li><a href="/contact">Contact</a></li>
    </ul>
  </div><!-- /.site-footer -->
</div><!-- /.container -->


    <div class="fullscreen-overlay js-fullscreen-overlay" id="fullscreen_overlay">
  <div class="fullscreen-container js-fullscreen-container">
    <div class="textarea-wrap">
      <textarea name="fullscreen-contents" id="fullscreen-contents" class="js-fullscreen-contents" placeholder="" data-suggester="fullscreen_suggester"></textarea>
    </div>
  </div>
  <div class="fullscreen-sidebar">
    <a href="#" class="exit-fullscreen js-exit-fullscreen tooltipped tooltipped-w" aria-label="Exit Zen Mode">
      <span class="mega-octicon octicon-screen-normal"></span>
    </a>
    <a href="#" class="theme-switcher js-theme-switcher tooltipped tooltipped-w"
      aria-label="Switch themes">
      <span class="octicon octicon-color-mode"></span>
    </a>
  </div>
</div>



    <div id="ajax-error-message" class="flash flash-error">
      <span class="octicon octicon-alert"></span>
      <a href="#" class="octicon octicon-remove-close close js-ajax-error-dismiss"></a>
      Something went wrong with that request. Please try again.
    </div>

  </body>
</html>

